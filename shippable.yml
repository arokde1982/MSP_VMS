# language setting
language: node_js

# version numbers, testing against two versions of node
node_js:
    - 4.2.1
    
# only build when certain Git branches are updated
branches:
  only:
    - master    

# Mongo binds to 127.0.0.1 by default
services:
  - mongodb

before_script:
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage

script:
    - gulp process-scripts

# npm install runs by default, but we need to specify global installs ourselves
before_install:
 - npm install -g gulp bower

# node environment 
env:
    global:
        - MONGOLAB_URI=mongodb://localhost/test
        - NODE_ENV=dev
        - secure: bvIC6krSkw/yx0i/TwE/1IGiJg1S6b5Xn+oxYmh72qx3EsVE4ebo3u70m9yUk2guBQoHtGr4J4tS0+O3Ss4bSSyYn3uuBc3I1EvHXN8rgflNjZ38bsSDmuNQ5TwCt2/QuqKlhxejNT4iGAjvA4wQgcS1e4Lw9o5QYo5KyTufnKJcCnlXFK1dt0jqKn7vNAonZVJvfvfLhXBL/NQHrl4H8fMOt7zmn3w0ir3A5T3Nej0UquHC6GjyyXae3Jz70g9vhYl0lLV6sPlSWwCYxcukgFVD14A5LiqFTCIrcAYc9q3arKCvZP28+W9Kmn9lm6EPGNfUEhrD5DGZg25Gi66RIQ==
    
notifications:
    email:
        recipients:
            - manish.sangani@prideglobal.com
        on_success: change
        on_failure: always
        

#FOR deployment to HEROKU - git push git@heroku.com:mspvms-nodejs.git master

#FOR Cloud Foundry below
after_success:
   - provider: cloudfoundry
   - username: manish.sangani@prideglobal.com
   - password: NA0KmerOjioL4Qs0weRh8z0gF4tx7XkuyHEdsvaOoozbIu1TSjc+45UQxSQ7lBClUpC93a82hB/IUhj5cEtylGm6xdMRNEYkjJpvJYl3uPRpcugKkF2+hrPQCb4IbvcUHVzIayAiBtbu5ZFDwfiNnqrVXpQzZZNYrNaZs28mQfGRkoS0/aqjj+GyrY6LD0yEy0Xflv1BUKmuoVEgcs4bBcoFS3NAx/QrVroTC46ZQpTZN+ZaUz1SroVQX753z0zQ+rXOO0Ul/bau98MOmaPdd0EtM84RvuTjTqTlZckEE817cEQNXEzyjwKDcn/i+N8DDNbkQxTm8aaa81tWqNTxYg==
   - api: https://api.run.pivotal.io
   - organization: MSP_VMS
   - space: development
